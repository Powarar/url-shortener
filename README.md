# üîó –°–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫ (URL Shortener Service)

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π —Å–µ—Ä–≤–∏—Å —Å–æ–∫—Ä–∞—â–µ–Ω–∏—è —Å—Å—ã–ª–æ–∫, —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–π –Ω–∞ **FastAPI** —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –¥–≤–∏–∂–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö **PostgreSQL** (—á–µ—Ä–µ–∑ SQLAlchemy).

-----

## üöÄ –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Ä–µ–∂–∏–º–∞ —Ä–∞–±–æ—Ç—ã: –∑–∞–ø—É—Å–∫ –≤ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω–∞) –∏ –ª–æ–∫–∞–ª—å–Ω—ã–π –∑–∞–ø—É—Å–∫ (—É–¥–æ–±–Ω–æ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏). –†–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É —Ä–µ–∂–∏–º–∞–º–∏ –∑–∞–∫–ª—é—á–∞–µ—Ç—Å—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö —Ö–æ—Å—Ç–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö.

### üõ†Ô∏è –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

  * **Docker** –∏ **Docker Compose** (–≤–µ—Ä—Å–∏–∏ 3.9+).
  * **Python 3.13** (–¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏).
  * **Poetry** (–¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏).

-----

## ‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è

–í –∫–æ—Ä–Ω–µ–≤–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ–∑–¥–∞—Ç—å –¥–≤–∞ —Ñ–∞–π–ª–∞ —Å –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–º–∏ –æ–∫—Ä—É–∂–µ–Ω–∏—è.

> ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –ó–∞–º–µ–Ω–∏—Ç–µ –≤—Å–µ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ–ª–∏ (`<DB_...>` –∏ —Ç.–ø.) –Ω–∞ —Å–≤–æ–∏ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è.

### 1\. `.env.docker` (–î–ª—è Docker Compose)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–∏–º—è —Å–µ—Ä–≤–∏—Å–∞** (`db`) –¥–ª—è —Ö–æ—Å—Ç–∞, —Ç–∞–∫ –∫–∞–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –æ–¥–Ω–æ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç–∏ Docker.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `.env.docker`:**

```env
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POSTGRES_PORT=<DB_PORT>
POSTGRES_DB=<DB_NAME>
POSTGRES_USER=<DB_USER>
POSTGRES_PASSWORD=<DB_PASSWORD>

# –•–æ—Å—Ç –¥–ª—è Docker-—Å–µ—Ç–∏
POSTGRES_HOST=db
```

### 2\. `.env.local` (–î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏)

–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ **–ª–æ–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å** (`127.0.0.1`), —á—Ç–æ–±—ã –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∑–∞–ø—É—â–µ–Ω–Ω–æ–µ –Ω–∞ —Ö–æ—Å—Ç–µ, –º–æ–≥–ª–æ –Ω–∞–π—Ç–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL.

**–°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Ñ–∞–π–ª–∞ `.env.local`:**

```env
# –û–±—â–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
POSTGRES_PORT=<DB_PORT>
POSTGRES_DB=<DB_NAME>
POSTGRES_USER=<DB_USER>
POSTGRES_PASSWORD=<DB_PASSWORD>

# –•–æ—Å—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞
POSTGRES_HOST=127.0.0.1
```

-----

## üê≥ –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Docker Compose

–≠—Ç–æ –Ω–∞–∏–±–æ–ª–µ–µ –ø—Ä–æ—Å—Ç–æ–π –∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±, –∫–æ—Ç–æ—Ä—ã–π –∑–∞–ø—É—Å–∫–∞–µ—Ç –æ–±–∞ —Å–µ—Ä–≤–∏—Å–∞ –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ.

1.  **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤:**

    ```bash
    docker compose --env-file .env.docker up --build
    ```

2.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/docs`.

-----

## üñ•Ô∏è –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

–≠—Ç–æ—Ç –º–µ—Ç–æ–¥ —É–¥–æ–±–µ–Ω –¥–ª—è –≤–Ω–µ—Å–µ–Ω–∏—è –∏–∑–º–µ–Ω–µ–Ω–∏–π –≤ –∫–æ–¥ Python.

### 1\. –ó–∞–ø—É—Å–∫ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

–°–Ω–∞—á–∞–ª–∞ –∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–æ–ª—å–∫–æ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL, –∏—Å–ø–æ–ª—å–∑—É—è `.env.docker`:

```bash
docker compose --env-file .env.docker up -d db
```

*(–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –Ω–∞ `127.0.0.1:<DB_PORT>`)*.

### 2\. –ó–∞–ø—É—Å–∫ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è FastAPI

1.  –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: `poetry install`

2.  –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –∏–∑ **`.env.local`** –∑–∞–≥—Ä—É–∂–µ–Ω—ã –≤ –≤–∞—à—É —Ç–µ–∫—É—â—É—é —Å–µ—Å—Å–∏—é —Ç–µ—Ä–º–∏–Ω–∞–ª–∞ (–æ—Å–æ–±–µ–Ω–Ω–æ `POSTGRES_HOST=127.0.0.1`).

3.  –ó–∞–ø—É—Å—Ç–∏—Ç–µ Uvicorn:

    ```bash
    poetry run uvicorn app.main:app --reload
    ```

4.  **–ü—Ä–æ–≤–µ—Ä–∫–∞:**
    –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–æ –ø–æ –∞–¥—Ä–µ—Å—É: `http://127.0.0.1:8000/docs`.

-----

## üí° –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ API

### –°–æ–∫—Ä–∞—â–µ–Ω–∏–µ —Å—Å—ã–ª–∫–∏ (POST)

  * **Endpoint:** `POST /short_url`
  * **–¢–µ–ª–æ –∑–∞–ø—Ä–æ—Å–∞:**
    ```json
    {
      "long_url": "https://example.com/very/long/path"
    }
    ```
  * **–û—Ç–≤–µ—Ç:** –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ª–∞–≥ (–Ω–∞–ø—Ä–∏–º–µ—Ä, `"new_slug_id"`).

### –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ (GET)

  * **Endpoint:** `GET /{slug}`
  * **–ü—Ä–∏–º–µ—Ä:** `http://localhost:8000/new_slug_id`
  * **–î–µ–π—Å—Ç–≤–∏–µ:** –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤—ã–ø–æ–ª–Ω—è–µ—Ç **—Ä–µ–¥–∏—Ä–µ–∫—Ç 307 (Temporary Redirect)** –Ω–∞ –ø–æ–ª–Ω—ã–π URL, —Å–≤—è–∑–∞–Ω–Ω—ã–π —Å–æ —Å–ª–∞–≥–æ–º.